---
- hosts: localhost
  vars:
    tcib_repo: "{{ ansible_user_dir }}/src/github.com/openstack-k8s-operators/tcib"
    # Repos generated by repo-setup tool
    repo_dir: "{{ ansible_user_dir }}/repos"
    registry_namespace: openstackzedcentos9
  tasks:
    - name: create symlink for tcib_role
      become: true
      ansible.builtin.shell: |
        cd /usr/share/ansible/roles
        ln -s {{ tcib_repo }}/ci/roles/build_containers build_containers

    - name: Build Zed Containers 
      ansible.builtin.include_role:
        name: build_containers
      vars:
        tcib_repo: "{{ tcib_repo }}"
        repo_dir: "{{ repo_dir }}"
        registry_namespace: "{{ registry_namespace }}"